webpackJsonp([1],{286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(298),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var i=n(70),s=Object(i.a)(r.a,void 0,void 0,!1,null,null,null);t.default=s.exports},298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(330)),r=o(n(334));function o(e){return e&&e.__esModule?e:{default:e}}t.default={render:function(e){return"solve"===this.$route.params.power?e("solve"):e("manager")},components:{manager:a.default,solve:r.default}}},299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(30)),r=o(n(71));function o(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{rules:{title:[{required:!0,message:"标题不能为空"},{required:!0,validator:function(e,t,n){if(t.length<25)return n();n(new Error("标题不能超过25字符"))}}],content:[{required:!0,message:"简介不能为空"},{required:!0,validator:function(e,t,n){if(t.length<100)return n();n(new Error("标题不能超过100字符"))}}],solveid:[{required:!0,message:"维修人不能为空"}]},form:{title:null,content:null,solveid:null},createShow:!1,delShow:!1,pagination:{total:0,currentPage:1,pageSize:5},solveUser:[],eventList:[],pUser:{},sUser:{}}},watch:{pagination:{handler:function(){this.getEventList()},deep:!0},$gMxUserMsg:{handler:function(e){if(e){if(e.role>2)return void this.$router.push("/");this.getEventList()}},deep:!0,immediate:!0}},created:function(){var e=this;this.$store.dispatch("event/getSolveUserList").then(function(t){var n=t.flag,a=t.data;t.errMsg;1===n&&(e.solveUser=a.rows)})},mounted:function(){this.$gMxpageLoad(!1)},methods:{watch:function(e){var t=this.eventList[e],n=t.uuid,a=t.title;this.$router.push("/event/detail/"+n+"?title="+a)},add:function(){this.createShow=!0},save:function(){var e=this;this.$refs.form.validate().then(function(t){t&&e.$store.dispatch("event/createEvent",e.form).then(function(t){t.data;var n=t.flag;t.errMsg;1===n&&e.getEventList().then(function(){e.createShow=!1})})})},edit:function(e){},del:function(e){var t=this,n=this.eventList[e],a=n.title,r=n.uuid;this.$msgbox({title:"谨慎操作！！！",message:"是否要删除 此条 标题为"+a+"的事件?",type:"warning",showCancelButton:!0,confirmButton:"确定",cancelButtonText:"取消",beforeClose:function(e,n,a){"confirm"===e?(n.confirmButtonLoading=!0,n.confirmButtonText="删除中...",t.$store.dispatch("event/delEvent",{uuid:r}).then(function(e){var r=e.flag,o=(e.data,e.errMsg);1===r?(t.$message({message:"删除成功",type:"success"}),n.confirmButtonLoading=!1,t.getEventList(),a()):(t.$message({message:o,type:"warning"}),n.confirmButtonLoading=!1,a())}).catch(function(e){t.$message({message:"删除失败",type:"warning"}),n.confirmButtonLoading=!1})):a()}})},getEventList:function(){var e=this,t=this.pagination,n=t.currentPage,o=t.pageSize,i=this.$gMxUserMsg;return this.$store.dispatch("event/getMgEventList",{pageIndex:n,pageSize:o,postid:i.uuid}).then(function(t){var n=t.data,o=t.flag,i=t.errMsg;if(1===o){var s=n.eventList,l=s.count,u=s.rows,c=n.pUser,p=n.sUser,d={},f={};return(0,r.default)(e,{eventList:u.map(function(e){var t=e.create_time,n=new Date(t),a=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDay();return e.create_time=a,e})}),e.pagination.total=l,c.forEach(function(e){var t=e.uuid;t&&(d[t]=e)}),p.forEach(function(e){var t=e.uuid;t&&(f[t]=e)}),e.sUser=(0,a.default)({},e.sUser,f),void(e.pUser=(0,a.default)({},e.pUser,d))}e.$notify({type:"warning",message:i})})}}}},300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(30)),r=o(n(71));function o(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{pagination:{total:0,currentPage:1,pageSize:5},solveUser:[],eventList:[],pUser:{},sUser:{}}},watch:{pagination:{handler:function(){this.getEventList()},deep:!0},$gMxUserMsg:{handler:function(e){e&&this.getEventList()},deep:!0,immediate:!0}},created:function(){var e=this;this.$store.dispatch("event/getSolveUserList").then(function(t){var n=t.flag,a=t.data;t.errMsg;1===n&&(e.solveUser=a.rows)})},mounted:function(){this.$gMxpageLoad(!1)},methods:{watch:function(e){this.$router.push("/event/detail/"+this.eventList[e].uuid)},getEventList:function(){var e=this,t=this.pagination,n=t.currentPage,o=t.pageSize,i=this.$gMxUserMsg;return this.$store.dispatch("event/getMgEventList",{pageIndex:n,pageSize:o,solveid:i.uuid}).then(function(t){var n=t.data,o=t.flag,i=t.errMsg;if(1===o){var s=n.eventList,l=s.count,u=s.rows,c=n.pUser,p=n.sUser,d={},f={};return(0,r.default)(e,{eventList:u.map(function(e){var t=e.create_time,n=new Date(t),a=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDay();return e.create_time=a,e})}),e.pagination.total=l,c.forEach(function(e){var t=e.uuid;t&&(d[t]=e)}),p.forEach(function(e){var t=e.uuid;t&&(f[t]=e)}),e.sUser=(0,a.default)({},e.sUser,f),void(e.pUser=(0,a.default)({},e.pUser,d))}e.$notify({type:"warning",message:i})})}}}},330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(299),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var i=n(333),s=(n.n(i),n(70));var l=function(e){n(331)},u=Object(s.a)(r.a,i.render,i.staticRenderFns,!1,l,null,null);t.default=u.exports},331:function(e,t,n){var a=n(332);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(282)("8a6104be",a,!0,{})},332:function(e,t,n){(e.exports=n(281)(!1)).push([e.i,".mgEvent-page-container .mgEvent--pagination-box{margin-top:10px}.mgEvent-page-container .mg-event-form-container{position:relative;width:50%;margin:0 auto}",""])},333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return((e.$gMxUserMsg||{}).role||5)<3?n("div",{staticClass:"mgEvent-page-container"},[n("section",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.add}},[n("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("\n            新增\n        ")])],1),e._v(" "),n("el-table",{attrs:{data:e.eventList,size:"small"}},[n("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),n("el-table-column",{attrs:{prop:"content",label:"简介"}}),e._v(" "),n("el-table-column",{attrs:{prop:"postid",label:"管理人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.postid?(e.pUser[t.row.postid]||{}).name:"暂无")+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"solveid",label:"维修人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.solveid?(e.sUser[t.row.solveid]||{}).name:"暂无")+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"pstatus",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n             "+e._s(0===t.row.pstatus?"未解决":1===t.row.pstatus?"已解决":t.row.pstatus)+"\n         ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"create_time",label:"生成时间"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){e.watch(t.$index)}}},[e._v("\n                  查看\n              ")]),e._v(" "),n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(n){e.edit(t.$index)}}},[e._v("\n                  修改\n              ")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){e.del(t.$index)}}},[e._v("\n                  删除\n              ")])]}}])})],1),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.pagination.total,expression:"pagination.total"}],staticClass:"mgEvent--pagination-box"},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"prev-text":"上一页","next-text":"下一页",background:""},on:{"update:currentPage":function(t){e.$set(e.pagination,"currentPage",t)}}})],1),e._v(" "),n("el-dialog",{attrs:{visible:e.createShow},on:{"update:visible":function(t){e.createShow=t}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("el-form",{ref:"form",staticClass:"mg-event-form-container",attrs:{rules:e.rules,model:e.form}},[n("el-form-item",{attrs:{prop:"title",label:"标题："}},[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"content",label:"简介："}},[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入简介"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"solveid",label:"维修人"}},[n("el-select",{model:{value:e.form.solveid,callback:function(t){e.$set(e.form,"solveid",t)},expression:"form.solveid"}},e._l(e.solveUser,function(e){return n("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})}))],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{type:"primary"},on:{click:e.save}},[e._v("\n                    确定\n                ")])],1)],1)],1)],1):e._e()},t.staticRenderFns=[]},334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(300),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var i=n(337),s=(n.n(i),n(70));var l=function(e){n(335)},u=Object(s.a)(r.a,i.render,i.staticRenderFns,!1,l,null,null);t.default=u.exports},335:function(e,t,n){var a=n(336);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(282)("f1600f30",a,!0,{})},336:function(e,t,n){(e.exports=n(281)(!1)).push([e.i,".mgEvent-page-container .mgEvent--pagination-box{margin-top:10px}.mgEvent-page-container .mg-event-form-container{position:relative;width:50%;margin:0 auto}",""])},337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mgEvent-page-container"},[n("el-table",{attrs:{data:e.eventList,size:"small"}},[n("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),n("el-table-column",{attrs:{prop:"content",label:"简介"}}),e._v(" "),n("el-table-column",{attrs:{prop:"postid",label:"管理人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.postid?(e.pUser[t.row.postid]||{}).name:"暂无")+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"create_time",label:"生成时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"pstatus",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(0===t.row.pstatus?"未解决":1===t.row.pstatus?"已解决":t.row.pstatus)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){e.watch(t.$index)}}},[e._v("\n                    查看\n                ")])]}}])})],1),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.pagination.total,expression:"pagination.total"}],staticClass:"mgEvent--pagination-box"},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"prev-text":"上一页","next-text":"下一页",background:""},on:{"update:currentPage":function(t){e.$set(e.pagination,"currentPage",t)}}})],1)],1)},t.staticRenderFns=[]}});